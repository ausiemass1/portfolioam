
<section class="container mt-4">
  <%
function getUserName(user) {
    if (!user) return "User";

    if (user.displayName) return user.displayName.split(" ")[0];  // Google
    if (user.username) return user.username;                       // GitHub
    if (user.name) return user.name.split(" ")[0];                 // MongoDB local user

    return "User";
}
%>

<h4 class="center-align">
    Welcome <%= getUserName(user) %>
</h4>

    <h1><%= title %></h1>
  
    <% if (products.length === 0) { %>
      <p>No products found.</p>
    <% } else { %>
      <table class="table table-striped table-bordered mt-3">
        <thead class="table-dark">
          <tr>
            <th>id</th>
            <th>product name</th>
            <th>Price</th>
            <th>Image</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(product => { %>
            <tr>
              <td><%= product.id %></td>
              <td><%= product.product_name %></td>
              <td><%= product.price %></td>
              <td>
                <img src="<%= product.image %>" alt="Product Image" width="80" height="80">
              </td>
             <td> <a href="/admin/products/edit/<%= product._id %>" onclick="return confirm('Edit this product?')">
                <span class="material-icons" style="color: rgb(30, 0, 255); cursor: pointer;">
                  edit
                </span>
              </a>
            </td>
            <td>
                  <a href="/admin/products/delete/<%= product._id %>" onclick="return confirm('Delete this product?')">
                    <span class="material-icons" style="color: red; cursor: pointer;">
                      delete
                    </span>
                  </a>
                </td>
                 
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  
    <hr>
  
 <form action="/paypal/pay" method="post">
  <input type="submit" value="Pay Now">
  
 </form>
 <div id="card-element"></div>
 <button id="payNow" type="button">pay with sstripe</button>
  </section>
  

